{
  "id": "django-postgres",
  "name": "Django + PostgreSQL + Celery",
  "description": "Production-ready Django web application with PostgreSQL database, Redis cache, Celery async workers, and Nginx reverse proxy",
  "category": "Full Stack / Python Web",
  "tags": ["Python", "Django", "PostgreSQL", "Redis", "Celery", "Nginx", "Full Stack", "REST API", "Background Jobs"],
  "dockerCompose": "version: '3.8'\n\nservices:\n  # Django Application\n  django-app:\n    image: python:3.11-slim\n    container_name: django-app\n    ports:\n      - \"8000:8000\"\n    environment:\n      - DJANGO_SETTINGS_MODULE=config.settings.production\n      - DATABASE_URL=postgresql://djangouser:djangopass@postgres:5432/djangodb\n      - REDIS_URL=redis://:redispass@redis:6379/0\n      - CELERY_BROKER_URL=redis://:redispass@redis:6379/1\n      - CELERY_RESULT_BACKEND=redis://:redispass@redis:6379/2\n      - DJANGO_SECRET_KEY=change-me-in-production-please-use-env-var\n      - DJANGO_DEBUG=False\n      - DJANGO_ALLOWED_HOSTS=*\n      - DJANGO_SECURE_SSL_REDIRECT=False\n    volumes:\n      - ./app:/app\n      - static-data:/app/staticfiles\n      - media-data:/app/media\n    working_dir: /app\n    command: >\n      sh -c \"pip install -r requirements.txt &&\n             python manage.py migrate --noinput &&\n             python manage.py collectstatic --noinput &&\n             gunicorn config.wsgi:application --bind 0.0.0.0:8000 --workers 4 --timeout 60\"\n    depends_on:\n      - postgres\n      - redis\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:8000/health/\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 40s\n    networks:\n      - django-network\n    restart: unless-stopped\n\n  # Celery Worker (Background Tasks)\n  celery-worker:\n    image: python:3.11-slim\n    container_name: django-celery-worker\n    environment:\n      - DJANGO_SETTINGS_MODULE=config.settings.production\n      - DATABASE_URL=postgresql://djangouser:djangopass@postgres:5432/djangodb\n      - REDIS_URL=redis://:redispass@redis:6379/0\n      - CELERY_BROKER_URL=redis://:redispass@redis:6379/1\n      - CELERY_RESULT_BACKEND=redis://:redispass@redis:6379/2\n      - DJANGO_SECRET_KEY=change-me-in-production-please-use-env-var\n    volumes:\n      - ./app:/app\n      - media-data:/app/media\n    working_dir: /app\n    command: >\n      sh -c \"pip install -r requirements.txt &&\n             celery -A config worker --loglevel=info --concurrency=4\"\n    depends_on:\n      - postgres\n      - redis\n    healthcheck:\n      test: [\"CMD-SHELL\", \"celery -A config inspect ping\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 20s\n    networks:\n      - django-network\n    restart: unless-stopped\n\n  # Celery Beat (Scheduled Tasks)\n  celery-beat:\n    image: python:3.11-slim\n    container_name: django-celery-beat\n    environment:\n      - DJANGO_SETTINGS_MODULE=config.settings.production\n      - DATABASE_URL=postgresql://djangouser:djangopass@postgres:5432/djangodb\n      - REDIS_URL=redis://:redispass@redis:6379/0\n      - CELERY_BROKER_URL=redis://:redispass@redis:6379/1\n      - CELERY_RESULT_BACKEND=redis://:redispass@redis:6379/2\n      - DJANGO_SECRET_KEY=change-me-in-production-please-use-env-var\n    volumes:\n      - ./app:/app\n    working_dir: /app\n    command: >\n      sh -c \"pip install -r requirements.txt &&\n             celery -A config beat --loglevel=info --scheduler django_celery_beat.schedulers:DatabaseScheduler\"\n    depends_on:\n      - postgres\n      - redis\n    networks:\n      - django-network\n    restart: unless-stopped\n\n  # PostgreSQL Database\n  postgres:\n    image: postgres:15-alpine\n    container_name: django-postgres\n    ports:\n      - \"5432:5432\"\n    environment:\n      - POSTGRES_DB=djangodb\n      - POSTGRES_USER=djangouser\n      - POSTGRES_PASSWORD=djangopass\n      - POSTGRES_INITDB_ARGS=--encoding=UTF-8\n    volumes:\n      - postgres-data:/var/lib/postgresql/data\n      - ./init-db.sql:/docker-entrypoint-initdb.d/init.sql\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U djangouser -d djangodb\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n    networks:\n      - django-network\n    restart: unless-stopped\n\n  # Redis (Cache + Message Broker + Session Store)\n  redis:\n    image: redis:7-alpine\n    container_name: django-redis\n    ports:\n      - \"6379:6379\"\n    command: redis-server --appendonly yes --requirepass redispass --maxmemory 512mb --maxmemory-policy allkeys-lru\n    volumes:\n      - redis-data:/data\n    healthcheck:\n      test: [\"CMD\", \"redis-cli\", \"--raw\", \"incr\", \"ping\"]\n      interval: 10s\n      timeout: 3s\n      retries: 5\n    networks:\n      - django-network\n    restart: unless-stopped\n\n  # Nginx (Reverse Proxy + Static Files)\n  nginx:\n    image: nginx:alpine\n    container_name: django-nginx\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro\n      - ./nginx/conf.d:/etc/nginx/conf.d:ro\n      - static-data:/app/staticfiles:ro\n      - media-data:/app/media:ro\n      - ./nginx/ssl:/etc/nginx/ssl:ro\n    depends_on:\n      - django-app\n    healthcheck:\n      test: [\"CMD\", \"nginx\", \"-t\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n    networks:\n      - django-network\n    restart: unless-stopped\n\nvolumes:\n  postgres-data:\n    driver: local\n  redis-data:\n    driver: local\n  static-data:\n    driver: local\n  media-data:\n    driver: local\n\nnetworks:\n  django-network:\n    driver: bridge\n",
  "recommendedOptions": {
    "targetPlatform": "both",
    "proxyType": "nginx",
    "addHealthChecks": true,
    "addResourceLimits": true,
    "resourceProfile": "medium",
    "addSecurity": true
  }
}
