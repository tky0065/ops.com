{
  "id": "laravel-mysql",
  "name": "Laravel + MySQL + Redis + Horizon",
  "description": "Production-ready Laravel PHP application with MySQL database, Redis cache/queue, Laravel Horizon for queue management, and Nginx + PHP-FPM",
  "category": "Full Stack / PHP Web",
  "tags": ["PHP", "Laravel", "MySQL", "Redis", "Horizon", "Nginx", "PHP-FPM", "Full Stack", "Queue Workers", "Eloquent ORM"],
  "dockerCompose": "version: '3.8'\n\nservices:\n  # Nginx Web Server\n  nginx:\n    image: nginx:alpine\n    container_name: laravel-nginx\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./app:/var/www/html\n      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro\n      - ./nginx/conf.d:/etc/nginx/conf.d:ro\n      - ./nginx/ssl:/etc/nginx/ssl:ro\n    depends_on:\n      - php-fpm\n    healthcheck:\n      test: [\"CMD\", \"nginx\", \"-t\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n    networks:\n      - laravel-network\n    restart: unless-stopped\n\n  # PHP-FPM Application\n  php-fpm:\n    image: php:8.2-fpm-alpine\n    container_name: laravel-php-fpm\n    environment:\n      - APP_NAME=Laravel\n      - APP_ENV=production\n      - APP_KEY=base64:change-me-in-production-please-generate-via-php-artisan\n      - APP_DEBUG=false\n      - APP_URL=https://yourdomain.com\n      - DB_CONNECTION=mysql\n      - DB_HOST=mysql\n      - DB_PORT=3306\n      - DB_DATABASE=laraveldb\n      - DB_USERNAME=laraveluser\n      - DB_PASSWORD=laravelpass\n      - CACHE_DRIVER=redis\n      - SESSION_DRIVER=redis\n      - QUEUE_CONNECTION=redis\n      - REDIS_HOST=redis\n      - REDIS_PASSWORD=redispass\n      - REDIS_PORT=6379\n      - BROADCAST_DRIVER=redis\n      - LOG_CHANNEL=stack\n      - LOG_LEVEL=error\n    volumes:\n      - ./app:/var/www/html\n      - ./php/php.ini:/usr/local/etc/php/php.ini:ro\n      - ./php/www.conf:/usr/local/etc/php-fpm.d/www.conf:ro\n    working_dir: /var/www/html\n    command: >\n      sh -c \"apk add --no-cache mysql-client postgresql-dev libzip-dev libpng-dev &&\n             docker-php-ext-install pdo pdo_mysql zip gd opcache &&\n             pecl install redis &&\n             docker-php-ext-enable redis &&\n             composer install --optimize-autoloader --no-dev &&\n             php artisan config:cache &&\n             php artisan route:cache &&\n             php artisan view:cache &&\n             php artisan migrate --force &&\n             php-fpm\"\n    depends_on:\n      - mysql\n      - redis\n    healthcheck:\n      test: [\"CMD-SHELL\", \"php-fpm-healthcheck || exit 1\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 40s\n    networks:\n      - laravel-network\n    restart: unless-stopped\n\n  # Laravel Queue Worker\n  queue-worker:\n    image: php:8.2-fpm-alpine\n    container_name: laravel-queue-worker\n    environment:\n      - APP_NAME=Laravel\n      - APP_ENV=production\n      - APP_KEY=base64:change-me-in-production-please-generate-via-php-artisan\n      - APP_DEBUG=false\n      - DB_CONNECTION=mysql\n      - DB_HOST=mysql\n      - DB_PORT=3306\n      - DB_DATABASE=laraveldb\n      - DB_USERNAME=laraveluser\n      - DB_PASSWORD=laravelpass\n      - CACHE_DRIVER=redis\n      - SESSION_DRIVER=redis\n      - QUEUE_CONNECTION=redis\n      - REDIS_HOST=redis\n      - REDIS_PASSWORD=redispass\n      - REDIS_PORT=6379\n    volumes:\n      - ./app:/var/www/html\n    working_dir: /var/www/html\n    command: >\n      sh -c \"apk add --no-cache mysql-client postgresql-dev libzip-dev &&\n             docker-php-ext-install pdo pdo_mysql zip opcache &&\n             pecl install redis &&\n             docker-php-ext-enable redis &&\n             composer install --optimize-autoloader --no-dev &&\n             php artisan queue:work --tries=3 --timeout=60 --sleep=3 --max-jobs=1000\"\n    depends_on:\n      - mysql\n      - redis\n    healthcheck:\n      test: [\"CMD-SHELL\", \"ps aux | grep '[p]hp artisan queue:work' || exit 1\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 20s\n    networks:\n      - laravel-network\n    restart: unless-stopped\n\n  # Laravel Horizon (Queue Dashboard & Management)\n  horizon:\n    image: php:8.2-fpm-alpine\n    container_name: laravel-horizon\n    ports:\n      - \"8080:8080\"\n    environment:\n      - APP_NAME=Laravel\n      - APP_ENV=production\n      - APP_KEY=base64:change-me-in-production-please-generate-via-php-artisan\n      - APP_DEBUG=false\n      - DB_CONNECTION=mysql\n      - DB_HOST=mysql\n      - DB_PORT=3306\n      - DB_DATABASE=laraveldb\n      - DB_USERNAME=laraveluser\n      - DB_PASSWORD=laravelpass\n      - CACHE_DRIVER=redis\n      - SESSION_DRIVER=redis\n      - QUEUE_CONNECTION=redis\n      - REDIS_HOST=redis\n      - REDIS_PASSWORD=redispass\n      - REDIS_PORT=6379\n    volumes:\n      - ./app:/var/www/html\n    working_dir: /var/www/html\n    command: >\n      sh -c \"apk add --no-cache mysql-client postgresql-dev libzip-dev &&\n             docker-php-ext-install pdo pdo_mysql zip opcache &&\n             pecl install redis &&\n             docker-php-ext-enable redis &&\n             composer install --optimize-autoloader --no-dev &&\n             php artisan horizon\"\n    depends_on:\n      - mysql\n      - redis\n    healthcheck:\n      test: [\"CMD-SHELL\", \"ps aux | grep '[p]hp artisan horizon' || exit 1\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 20s\n    networks:\n      - laravel-network\n    restart: unless-stopped\n\n  # Laravel Scheduler (Cron)\n  scheduler:\n    image: php:8.2-fpm-alpine\n    container_name: laravel-scheduler\n    environment:\n      - APP_NAME=Laravel\n      - APP_ENV=production\n      - APP_KEY=base64:change-me-in-production-please-generate-via-php-artisan\n      - APP_DEBUG=false\n      - DB_CONNECTION=mysql\n      - DB_HOST=mysql\n      - DB_PORT=3306\n      - DB_DATABASE=laraveldb\n      - DB_USERNAME=laraveluser\n      - DB_PASSWORD=laravelpass\n      - REDIS_HOST=redis\n      - REDIS_PASSWORD=redispass\n    volumes:\n      - ./app:/var/www/html\n    working_dir: /var/www/html\n    command: >\n      sh -c \"apk add --no-cache mysql-client postgresql-dev libzip-dev &&\n             docker-php-ext-install pdo pdo_mysql zip opcache &&\n             pecl install redis &&\n             docker-php-ext-enable redis &&\n             composer install --optimize-autoloader --no-dev &&\n             while true; do php artisan schedule:run --verbose --no-interaction & sleep 60; done\"\n    depends_on:\n      - mysql\n      - redis\n    networks:\n      - laravel-network\n    restart: unless-stopped\n\n  # MySQL Database\n  mysql:\n    image: mysql:8.0\n    container_name: laravel-mysql\n    ports:\n      - \"3306:3306\"\n    environment:\n      - MYSQL_ROOT_PASSWORD=rootpass\n      - MYSQL_DATABASE=laraveldb\n      - MYSQL_USER=laraveluser\n      - MYSQL_PASSWORD=laravelpass\n      - MYSQL_CHARSET=utf8mb4\n      - MYSQL_COLLATION=utf8mb4_unicode_ci\n    volumes:\n      - mysql-data:/var/lib/mysql\n      - ./mysql/init.sql:/docker-entrypoint-initdb.d/init.sql\n      - ./mysql/my.cnf:/etc/mysql/conf.d/my.cnf:ro\n    command: --default-authentication-plugin=mysql_native_password\n    healthcheck:\n      test: [\"CMD\", \"mysqladmin\", \"ping\", \"-h\", \"localhost\", \"-u\", \"laraveluser\", \"-plaravelpass\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n    networks:\n      - laravel-network\n    restart: unless-stopped\n\n  # Redis (Cache + Session + Queue Broker)\n  redis:\n    image: redis:7-alpine\n    container_name: laravel-redis\n    ports:\n      - \"6379:6379\"\n    command: redis-server --appendonly yes --requirepass redispass --maxmemory 512mb --maxmemory-policy allkeys-lru\n    volumes:\n      - redis-data:/data\n    healthcheck:\n      test: [\"CMD\", \"redis-cli\", \"--raw\", \"incr\", \"ping\"]\n      interval: 10s\n      timeout: 3s\n      retries: 5\n    networks:\n      - laravel-network\n    restart: unless-stopped\n\nvolumes:\n  mysql-data:\n    driver: local\n  redis-data:\n    driver: local\n\nnetworks:\n  laravel-network:\n    driver: bridge\n",
  "recommendedOptions": {
    "targetPlatform": "both",
    "proxyType": "nginx",
    "addHealthChecks": true,
    "addResourceLimits": true,
    "resourceProfile": "medium",
    "addSecurity": true
  }
}
